# GitHub Copilot Instructions

## Commit Message Format

Always use Arlo's Risk-Aware Commit Notation for all commit messages in this project.

### Format: `[Risk Level][Intention] Description of what the code now does`

#### Risk Levels:
- **`.`** (Safe/Proven) - Addresses all known and unknown risks. Provable refactorings, developer-only changes.
- **`^`** (Validated) - Addresses all known risks. Test-supported changes, verified behavior.
- **`!`** (Risky) - Some known risks remain unverified. Unit tests for new behavior, but manual execution.
- **`@`** (Probably Broken) - No risk attestation. No tests, unfinished, or unverified.

#### Core Intentions:
- **`F/f`** - Feature (changes 1 behavior)
- **`B/b`** - Bugfix (repairs 1 undesirable behavior)
- **`R/r`** - Refactoring (0 behavior changes, 1 structure change)
- **`D/d`** - Documentation (0 behavior changes)
- **`T/t`** - Testing (0 behavior changes, 1 test change)

#### Important Rules:
1. Features/bugfixes > 8 lines of code automatically become risky (`!`) or broken (`@`)
2. Use present tense, describe what the code now does, not what you changed
3. Case meaning (decide as team): UPPERCASE = intended behavior change OR user-visible change
4. Always include risk level and intention - no exceptions

#### Examples:
- `". r Extracts API functions from main controller"` - Safe refactoring via tool
- `"^ F Compiles Doculisp files to markdown output"` - Validated feature with tests
- `"! B Handles malformed Doculisp syntax gracefully"` - Risky bugfix, manual verification
- `"@ F Supports nested include blocks"` - Unfinished/unverified feature

#### Reference:
https://github.com/RefactoringCombos/ArlosCommitNotation

## Documentation Guidelines

When writing or updating documentation, always reference the **AI Assistant Codex** (`AI-Assistant-Codex.md`) for:

- **Doculisp DSL Syntax**: Proper structure, blocks, and formatting patterns
- **File Organization**: Naming conventions, directory structure, and modular organization
- **Best Practices**: Content strategy, development workflow, and error prevention
- **Common Workflows**: Standard patterns for different document types and structures
- **Syntax Rules**: Critical file type rules, parameter limits, and escape sequences

### Key Documentation Requirements:
- Use `.dlisp` files for structure-only documents (no text content)
- Use `.md` files with embedded Doculisp blocks for documents with text content
- Always use dynamic headings `<!-- (dl (# Title)) -->` in .md files intended for Doculisp compilation
- Wrap all Doculisp code in HTML comments when in .md files: `<!-- (dl ...) -->`
- Follow modular organization principles with clear file naming conventions
- Use approval testing patterns when documenting complex structures

## Additional Instructions

- Prioritize small, focused commits that can achieve higher safety levels
- When suggesting large changes, break them into smaller commits with appropriate risk levels
- Prefer provable refactorings (`.` level) when possible